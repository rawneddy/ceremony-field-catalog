{
  "review_type": "BLOCKER_IDENTIFICATION",
  "priority": "Find issues that would BLOCK or SERIOUSLY UNDERMINE implementation",
  "output_file": {
    "path": "docs/ui/reviews/02_BLOCKER-REVIEW_{{REVIEWER}}.md",
    "instruction": "Write your complete review to this file using the Write tool. Replace {{REVIEWER}} with your model name (e.g., GPT, GEMINI, CLAUDE, AMP, etc.). Use markdown format following the response_template structure below."
  },
  "context": {
    "project": "Ceremony Field Catalog UI",
    "focus_area": "Faceted filtering, 3-panel layout, client-side filtering architecture",
    "stage": "Pre-implementation design review (round 2)",
    "previous_review": "5-model synthesis completed, decisions documented, wireframes updated"
  },
  "instructions": {
    "primary_task": "Identify BLOCKERS - design flaws, contradictions, missing pieces, or impossible requirements that would prevent a developer from completing this implementation.",
    "secondary_task": "Note any other suggestions or concerns, but clearly distinguish them from blockers.",
    "output_format": {
      "blockers": "List with severity (CRITICAL/HIGH) and explanation of WHY it blocks implementation",
      "concerns": "List with severity (MEDIUM/LOW) and suggested resolution",
      "questions": "Clarifying questions if something is ambiguous but not necessarily a blocker"
    }
  },
  "blocker_criteria": [
    "Contradictory requirements that cannot both be satisfied",
    "Missing information required to implement a feature",
    "Technical impossibility given the stated constraints",
    "Data model mismatches that would cause runtime failures",
    "UX flows that are incomplete or have dead ends",
    "State management gaps that would cause inconsistent UI"
  ],
  "specific_areas_to_scrutinize": [
    {
      "area": "useFacets hook interface",
      "question": "Is this interface complete enough to implement all the described behaviors? Are there missing methods or state properties?",
      "interface": "See IMPLEMENTATION.md 'Core TypeScript Interfaces' section"
    },
    {
      "area": "Disjunctive counting",
      "question": "The design says 'current facet counts stay constant while other facets update'. Is this behavior fully specified? What happens on initial load vs after selections?",
      "example": "If I select productCode=DDA, the productCode facet keeps showing all 4 values with original counts, but action facet updates to show only values present in DDA-filtered results?"
    },
    {
      "area": "Mode switching warning",
      "question": "When switching from 'Include any' (multiple selected) to 'Require one', we show a warning. But what exactly happens? Clear all? Keep first? Is this specified?"
    },
    {
      "area": "Column header filters vs sidebar facets",
      "question": "Field Path (text input) and Context (dropdown) are in column headers. Metadata keys are in sidebar. Is the interaction between these two filter locations well-defined? Do they combine correctly?"
    },
    {
      "area": "Export includes metadata",
      "question": "Table doesn't show metadata columns, but export includes them. Is it clear WHERE the export gets metadata from? (Answer: from the CatalogEntry objects, not table display)"
    },
    {
      "area": "Single-valued metadata assumption",
      "question": "Design states metadata is Map<String, String> (single value per key). 'Require one' means entry's value must equal selected value. Is this semantic correct and clearly documented?"
    },
    {
      "area": "Server-side filter changes",
      "question": "When user changes server-side filters (context, metadata in Advanced Search), client-side facet filters reset. Is this behavior clearly specified? What about column header filters?"
    },
    {
      "area": "Zero results state",
      "question": "Design says 'keep filters visible so user can undo'. But if ALL filters are applied and result is zero, which filter should user remove first? Is there guidance?"
    },
    {
      "area": "Field path removed from detail panel",
      "question": "We removed fieldPath from the right detail panel because it's visible in the selected table row. But what if the path is truncated in the table? Is there still a way to see/copy the full path?"
    },
    {
      "area": "Three-state column sorting",
      "question": "All columns sort: ascending -> descending -> original order. Is 'original order' well-defined? (Answer: order returned from API, then filtered by client-side filters)"
    }
  ],
  "documents_to_review": [
    {
      "file": "docs/ui/REQUIREMENTS.md",
      "focus": "REQ-3.1 (table), REQ-3.3 (client-side filtering), REQ-3.4 (detail panel), REQ-3.8 (faceted filtering)"
    },
    {
      "file": "docs/ui/IMPLEMENTATION.md",
      "focus": "Full 3-Panel Layout wireframe, Faceted Metadata Filtering section, Results Table Features section, Core TypeScript Interfaces (useFacets)"
    },
    {
      "file": "docs/ui/reviews/01_FACET-PLAN.md",
      "focus": "Decisions Made tables - verify all decisions are reflected in the main docs"
    }
  ],
  "response_template": {
    "blockers": [
      {
        "id": "B1",
        "severity": "CRITICAL|HIGH",
        "location": "file:section or REQ-X.X",
        "issue": "Description of the blocking issue",
        "why_blocks": "Explanation of why this prevents implementation",
        "suggested_resolution": "How to fix it"
      }
    ],
    "concerns": [
      {
        "id": "C1",
        "severity": "MEDIUM|LOW",
        "location": "file:section or REQ-X.X",
        "issue": "Description",
        "suggestion": "Recommended change"
      }
    ],
    "questions": [
      {
        "id": "Q1",
        "location": "file:section",
        "question": "Clarifying question",
        "impact_if_unresolved": "What could go wrong"
      }
    ],
    "verification": {
      "all_decisions_reflected": "Yes/No - Are all 01_FACET-PLAN.md decisions in main docs?",
      "wireframes_consistent": "Yes/No - Do wireframes match requirements?",
      "interfaces_complete": "Yes/No - Are TypeScript interfaces sufficient?"
    },
    "summary": "One paragraph overall assessment"
  },
  "important_note": "This is round 2. The design has already been through one review cycle. Focus on finding things that would ACTUALLY BLOCK a developer, not polish or preferences. If the design is solid, say so.",
  "final_instruction": "After completing your review, write the full review to the output_file path specified above. Do not just respond in chat - use the Write tool to create the markdown file."
}
